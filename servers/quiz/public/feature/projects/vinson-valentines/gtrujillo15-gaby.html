<!doctype html>
<html lang="en"><head>
    <meta charset="UTF-8">
    <title>Quizzer</title>
</head>
<body>
  <!-- HTML -->
  <input id ="message" type="text" placeholders="user">
  <input type="text" placeholder="message">
  <button onclick="sendMessage()">Send Message</button>

</body>
<script src="/socket.io/socket.io.js"></script>
<script src="../../../basic/basic.js"></script>
<link rel="stylesheet" href="../../../basic/basic.css">
<script id="inline-js">
  let targetUser = null;
  function sendMessage() {
    const payload = {
      if (!targetUser) return;
      username: targetUser,
      message: document.getElementsById('message').value,
    };
    socket.emit('send-message', payload);
  
  }
  socket.on('server-sent-message', function {message}
  socket.on('users', function (users) {
    console.log('users', users);
    const ul = document.getElementsByTagName('ul')[0];
    ul.innerHTML = '';
    if (!ul.children.length) {
      users.forEach ( user => {
        const li= document.createElement('li');
        ul.appendChild(li);
        li.innerHTML = JSON.stringify(user);
        li.user = user;
        li.addEventListener('click', function(){
          console.log(this.user);
          targetUser = this.user;
          console.log('targetUser', Object.keys(targetUser));

        })
      })
    }
  })

  // const inputs = document.getElementsByTagName('input');
  // function sendMessage() {
  //   const payload = {
  //     username: inputs[0].value,
  //     message: inputs[1].value
  //   };
  //   socket.emit('send-message', payload)
  // }
</script>
</html>